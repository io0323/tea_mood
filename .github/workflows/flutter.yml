name: Flutter Analysis (Network Optimized)

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  analyze:
    name: Flutter Static Analysis
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      # Flutterã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ¶é™ã‚’å›é¿ã™ã‚‹ãŸã‚ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ´»ç”¨ï¼‰
      - name: Set up Flutter
        uses: subosito/flutter-action@v2
        with:
          channel: stable
          cache: true
          flutter-version: '3.32.6'

      # ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ´»ç”¨ï¼‰
      - name: Install dependencies
        run: |
          flutter pub get

      # ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®æ¤œè¨¼
      - name: Verify code formatting
        run: dart format --output=none --set-exit-if-changed .

      # Flutterã®é™çš„è§£æå®Ÿè¡Œ
      - name: Run Flutter analyze
        run: flutter analyze

      # çµæœã®è©³ç´°è¡¨ç¤º
      - name: Display analysis results
        run: |
          echo "ğŸ¯ Flutter analysis completed successfully!"
          echo "ğŸ“± Flutter version: $(flutter --version | head -n 1)"
          echo "ğŸ“¦ Dependencies installed: $(flutter pub deps | wc -l) packages"
          echo "ğŸ” Static analysis: Completed"
          echo "ğŸ¨ Code formatting: Verified"
